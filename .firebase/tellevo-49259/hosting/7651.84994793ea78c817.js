"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7651],{7651:(h,f,e)=>{e.r(f),e.d(f,{AuthPageModule:()=>j});var m=e(177),s=e(4341),d=e(4742),l=e(9384),g=e(467),o=e(4438),c=e(385),v=e(5265),P=e(9381),y=e(3683),A=e(9981),F=e(1765);function E(t,a){1&t&&(o.j41(0,"div"),o.EFF(1,"El correo es requerido"),o.k0s())}function I(t,a){1&t&&(o.j41(0,"div"),o.EFF(1,"El correo no es valido"),o.k0s())}function T(t,a){if(1&t&&(o.j41(0,"div",11),o.DNE(1,E,2,0,"div",12)(2,I,2,0,"div",12),o.k0s()),2&t){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),o.R7$(),o.Y8G("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function C(t,a){1&t&&(o.j41(0,"div"),o.EFF(1,"La contrase\xf1a es requerida"),o.k0s())}function M(t,a){1&t&&(o.j41(0,"div"),o.EFF(1,"La contrase\xf1a debe tener minimo 6 caracteres"),o.k0s())}function G(t,a){if(1&t&&(o.j41(0,"div",11),o.DNE(1,C,2,0,"div",12)(2,M,2,0,"div",12),o.k0s()),2&t){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required),o.R7$(),o.Y8G("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.minlength)}}const L=[{path:"",component:(()=>{var t;class a{constructor(){this.form=new s.gE({email:new s.MJ("",[s.k0.required,s.k0.email]),password:new s.MJ("",[s.k0.required,s.k0.minLength(6)])}),this.firebaseSvc=(0,o.WQX)(c.f),this.utilSvc=(0,o.WQX)(v.T)}ngOnInit(){}submit(){var i=this;return(0,g.A)(function*(){const n=yield i.utilSvc.loading();yield n.present(),i.firebaseSvc.signIn(i.form.value).then(u=>{i.getUserInfo(u.user.uid)}).catch(u=>{console.log(u),i.utilSvc.presentToast({message:u.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{n.dismiss()})})()}getUserInfo(i){var n=this;return(0,g.A)(function*(){const u=yield n.utilSvc.loading();yield u.present(),n.firebaseSvc.getDocument(`users/${i}`).then(p=>{n.utilSvc.saveInLocalStorage("user",p),n.utilSvc.routerLink("/main/home"),n.form.reset(),n.utilSvc.presentToast({message:`Te damos la bienvenida ${p.name}`,duration:1500,color:"primary",position:"middle",icon:"person-circle-outline"})}).catch(p=>{console.log(p),n.utilSvc.presentToast({message:p.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{u.dismiss()})})()}}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o.VBU({type:t,selectors:[["app-auth"]],decls:18,vars:6,consts:[["title","Login"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","email","icon","mail-outline","type","email","label","Correo","label-placement","floating",3,"control"],["class","validators",4,"ngIf"],["type","password","label","Contrase\xf1a","label-placement","floating","icon","lock-closed-outline",3,"control"],["routerLink","forgot-password",1,"ion-text-end"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","log-in-outline"],["routerLink","sign-up","expand","block","mode","ios","fill","outline",1,"ion-margin-top"],["slot","end","name","person-add-outline"],[1,"validators"],[4,"ngIf"]],template:function(i,n){1&i&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content")(2,"div",1)(3,"form",2),o.bIt("ngSubmit",function(){return n.submit()})("keypress.enter",function(){return n.submit()}),o.nrm(4,"app-logo")(5,"app-custom-input",3),o.DNE(6,T,3,2,"div",4),o.nrm(7,"app-custom-input",5),o.DNE(8,G,3,2,"div",4),o.j41(9,"p",6),o.EFF(10,"\xbfOlvidaste tu contrase\xf1a?"),o.k0s(),o.j41(11,"ion-button",7),o.EFF(12," Ingresar "),o.nrm(13,"ion-icon",8),o.k0s(),o.j41(14,"ion-button",9),o.EFF(15," Registrarse "),o.nrm(16,"ion-icon",10),o.k0s()()()(),o.nrm(17,"app-footer")),2&i&&(o.R7$(3),o.Y8G("formGroup",n.form),o.R7$(2),o.Y8G("control",n.form.controls.email),o.R7$(),o.Y8G("ngIf",n.form.controls.email.errors&&n.form.controls.email.touched),o.R7$(),o.Y8G("control",n.form.controls.password),o.R7$(),o.Y8G("ngIf",n.form.controls.password.errors&&n.form.controls.password.touched),o.R7$(3),o.Y8G("disabled",n.form.invalid))},dependencies:[m.bT,s.qT,s.cb,d.Jm,d.W9,d.iq,d.N7,l.Wk,P.l,y.H,A.Z,s.j4,F.n]}),a})()},{path:"sign-up",loadChildren:()=>e.e(920).then(e.bind(e,920)).then(t=>t.SignUpPageModule)},{path:"forgot-password",loadChildren:()=>e.e(7005).then(e.bind(e,7005)).then(t=>t.ForgotPasswordPageModule)}];let R=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[l.iI.forChild(L),l.iI]}),a})();var S=e(3887);let j=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[m.MD,s.YN,d.bv,R,S.G]}),a})()},9981:(h,f,e)=>{e.d(f,{Z:()=>d});var m=e(4438),s=e(4742);let d=(()=>{var l;class g{constructor(c){this.aController=c}ngOnInit(){this.animation=this.aController.create().addElement(document.querySelector(".logo")).duration(2500).iterations(1/0).fromTo("transform","rotateY(0deg)","rotateY(360deg)"),this.animation?this.animation.play():alert("Error, ups, no se que ocurre")}}return(l=g).\u0275fac=function(c){return new(c||l)(m.rXU(s.Hx))},l.\u0275cmp=m.VBU({type:l,selectors:[["app-logo"]],decls:3,vars:0,consts:[[1,"imgLogo"],["src","assets/img/logo.png",1,"logo"]],template:function(c,v){1&c&&(m.j41(0,"p")(1,"ion-title",0),m.nrm(2,"img",1),m.k0s()())},dependencies:[s.BC],styles:[".imgLogo[_ngcontent-%COMP%]{margin-top:20px}"]}),g})()}}]);